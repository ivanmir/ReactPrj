{"ast":null,"code":"import _regeneratorRuntime from\"/home/user/projects/ReactPrj/app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/user/projects/ReactPrj/app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/user/projects/ReactPrj/app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{Container,Box}from\"@material-ui/core\";import{DataGrid}from\"@material-ui/data-grid\";import{getTableData,getTableCount}from\"api\";import{jsx as _jsx}from\"react/jsx-runtime\";var columns=[{field:\"CategoryName\",headerName:\"CategoryName\",width:250},{field:\"Description\",headerName:\"Description\",flex:1},{field:\"CategoryID\",headerName:\"CategoryID\",flex:1}];var PAGE_SIZE=15;export default function MasterPage(){var _ref;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),items=_useState2[0],setItems=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];// Number of rows which exist on the service\nvar _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),rowCount=_useState6[0],setRowCount=_useState6[1];var loadData=function loadData(_x){return(_ref=_ref||_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(isFirstLoad){var skip,count,_items,itemsWithIds,_args=arguments;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:skip=_args.length>1&&_args[1]!==undefined?_args[1]:0;_context.prev=1;setItems([]);setLoading(true);if(!isFirstLoad){_context.next=9;break;}_context.next=7;return getTableCount();case 7:count=_context.sent;setRowCount(count);case 9:_context.next=11;return getTableData({$top:PAGE_SIZE,$skip:skip});case 11:_items=_context.sent;itemsWithIds=_items.map(function(item,index){item.id=index;return item;});setItems(itemsWithIds);case 14:_context.prev=14;setLoading(false);return _context.finish(14);case 17:case\"end\":return _context.stop();}},_callee,null,[[1,,14,17]]);}))).apply(this,arguments);};var handlePageChanged=function handlePageChanged(_ref2){var page=_ref2.page;loadData(false,page*PAGE_SIZE);};useEffect(function(){// when component mounted\nloadData(true);},[]);return/*#__PURE__*/_jsx(Container,{disableGutters:true,children:/*#__PURE__*/_jsx(Box,{height:\"80vh\",py:5,children:/*#__PURE__*/_jsx(DataGrid,{loading:loading,rows:items,columns:columns,pageSize:PAGE_SIZE,paginationMode:\"server\",rowCount:rowCount,onPageChange:handlePageChanged})})});}","map":{"version":3,"names":["React","useEffect","useState","Container","Box","DataGrid","getTableData","getTableCount","jsx","_jsx","columns","field","headerName","width","flex","PAGE_SIZE","MasterPage","_ref","_useState","_useState2","_slicedToArray","items","setItems","_useState3","_useState4","loading","setLoading","_useState5","_useState6","rowCount","setRowCount","loadData","_x","_asyncToGenerator","_regeneratorRuntime","mark","_callee","isFirstLoad","skip","count","_items","itemsWithIds","_args","arguments","wrap","_callee$","_context","prev","next","length","undefined","sent","$top","$skip","map","item","index","id","finish","stop","apply","handlePageChanged","_ref2","page","disableGutters","children","height","py","rows","pageSize","paginationMode","onPageChange"],"sources":["/home/user/projects/ReactPrj/app/src/pages/MasterPage.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Container, Box } from \"@material-ui/core\";\nimport { DataGrid } from \"@material-ui/data-grid\";\nimport { getTableData, getTableCount } from \"api\";\n\nconst columns = [\n  { field: \"CategoryName\", headerName: \"CategoryName\", width: 250 },\n  { field: \"Description\", headerName: \"Description\", flex: 1 },\n  { field: \"CategoryID\", headerName: \"CategoryID\", flex: 1 }\n];\n\nconst PAGE_SIZE = 15;\n\nexport default function MasterPage() {\n  const [items, setItems] = useState([]);\n  const [loading, setLoading] = useState(false);\n\n  // Number of rows which exist on the service\n  const [rowCount, setRowCount] = useState(0);\n\n  const loadData = async (isFirstLoad, skip = 0) => {\n    try {\n      setItems([]);\n      setLoading(true);\n\n      if (isFirstLoad) {\n        const count = await getTableCount();\n        setRowCount(count);\n      }\n\n      const _items = await getTableData({\n        $top: PAGE_SIZE,\n        $skip: skip\n      });\n      const itemsWithIds = _items.map((item, index) => {\n        item.id = index;\n        return item;\n      });\n      setItems(itemsWithIds);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handlePageChanged = ({ page }) => {\n    loadData(false, page * PAGE_SIZE);\n  };\n\n  useEffect(() => {\n    // when component mounted\n    loadData(true);\n  }, []);\n\n  return (\n    <Container disableGutters>\n      <Box height=\"80vh\" py={5}>\n        <DataGrid\n          loading={loading}\n          rows={items}\n          columns={columns}\n          pageSize={PAGE_SIZE}\n          paginationMode=\"server\"\n          rowCount={rowCount}\n          onPageChange={handlePageChanged}\n        />\n      </Box>\n    </Container>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}